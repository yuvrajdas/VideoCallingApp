(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{130:function(e,t){},132:function(e,t){},150:function(e,t,a){},151:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(9),r=a.n(c),i=a(181),l=a(33),o=a(184),s=a(186),d=a(187),j=a(19),u=a(82),b=a(53),m=a.n(b),O=a(4),x=Object(n.createContext)(),f=Object(u.io)("http://localhost:5000"),p=function(e){var t=e.children,a=Object(n.useState)(!1),c=Object(j.a)(a,2),r=c[0],i=c[1],l=Object(n.useState)(!1),o=Object(j.a)(l,2),s=o[0],d=o[1],u=Object(n.useState)(),b=Object(j.a)(u,2),p=b[0],h=b[1],g=Object(n.useState)(""),v=Object(j.a)(g,2),C=v[0],y=v[1],w=Object(n.useState)({}),k=Object(j.a)(w,2),N=k[0],S=k[1],A=Object(n.useState)(""),I=Object(j.a)(A,2),V=I[0],D=I[1],E=Object(n.useRef)(),U=Object(n.useRef)(),W=Object(n.useRef)();Object(n.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){h(e),E.current.srcObject=e})),f.on("me",(function(e){return D(e)})),f.on("callUser",(function(e){var t=e.from,a=e.name,n=e.signal;S({isReceivingCall:!0,from:t,name:a,signal:n})}))}),[]);return Object(O.jsx)(x.Provider,{value:{call:N,callAccepted:r,myVideo:E,userVideo:U,stream:p,name:C,setName:y,callEnded:s,me:V,callUser:function(e){var t=new m.a({initiator:!0,trickle:!1,stream:p});t.on("signal",(function(t){f.emit("callUser",{userToCall:e,signalData:t,from:V,name:C})})),t.on("stream",(function(e){U.current.srcObject=e})),f.on("callAccepted",(function(e){i(!0),t.signal(e)})),W.current=t},leaveCall:function(){d(!0),W.current.destroy(),window.location.reload()},answerCall:function(){i(!0);var e=new m.a({initiator:!1,trickle:!1,stream:p});e.on("signal",(function(e){f.emit("answerCall",{signal:e,to:N.from})})),e.on("stream",(function(e){U.current.srcObject=e})),e.signal(N.signal),W.current=e}},children:t})},h=Object(i.a)((function(e){return{video:Object(l.a)({width:"550px",backgroundColor:"black"},e.breakpoints.down("xs"),{width:"300px"}),gridContainer:Object(l.a)({justifyContent:"center"},e.breakpoints.down("xs"),{flexDirection:"column"}),paper:{backgroundColor:"black",padding:"3px",margin:"10px",border:"2px solid #4d79ff"}}})),g=function(){var e=Object(n.useContext)(x),t=e.name,a=e.callAccepted,c=e.myVideo,r=e.userVideo,i=e.callEnded,l=e.stream,j=e.call,u=h();return Object(O.jsxs)(o.a,{container:!0,className:u.gridContainer,children:[l&&Object(O.jsx)(s.a,{className:u.paper,children:Object(O.jsxs)(o.a,{item:!0,xs:12,md:6,children:[Object(O.jsx)(d.a,{variant:"h5",style:{color:"#4d79ff",fontWeight:"bold"},gutterBottom:!0,children:t||"Your Screen"}),Object(O.jsx)("video",{playsInline:!0,muted:!0,ref:c,autoPlay:!0,className:u.video})]})}),a&&!i&&Object(O.jsx)(s.a,{className:u.paper,children:Object(O.jsxs)(o.a,{item:!0,xs:12,md:6,children:[Object(O.jsx)(d.a,{variant:"h5",gutterBottom:!0,children:j.name||"Name"}),Object(O.jsx)("video",{playsInline:!0,ref:r,autoPlay:!0,className:u.video})]})})]})},v=a(188),C=a(192),y=a(193),w=a(88),k=a(189),N=a(190),S=a(191),A=Object(i.a)((function(e){return{root:{display:"flex",flexDirection:"column"},gridContainer:Object(l.a)({width:"100%",background:"#0d0d0d"},e.breakpoints.down("xs"),{flexDirection:"column"}),container:Object(l.a)({width:"700px",margin:"35px 0",background:"#0d0d0d"},e.breakpoints.down("xs"),{width:"80%"}),margin:{marginTop:20},padding:{padding:20},paper:{padding:"10px 20px",border:"2px solid #4d79ff",background:"#0d0d0d"}}})),I=function(e){var t=e.children,a=Object(n.useContext)(x),c=a.me,r=a.callAccepted,i=a.name,l=a.setName,u=a.callEnded,b=a.leaveCall,m=a.callUser,f=Object(n.useState)(""),p=Object(j.a)(f,2),h=p[0],g=p[1],I=A();return Object(O.jsx)(v.a,{className:I.container,children:Object(O.jsxs)(s.a,{elevation:10,className:I.paper,children:[Object(O.jsx)("form",{className:I.root,noValidate:!0,autoComplete:"off",children:Object(O.jsxs)(o.a,{container:!0,className:I.gridContainer,children:[Object(O.jsxs)(o.a,{item:!0,xs:12,md:6,className:I.padding,children:[Object(O.jsx)(d.a,{gutterBottom:!0,variant:"h6",children:"Your Account"}),Object(O.jsx)(C.a,{label:"Enter your name here...",value:i,onChange:function(e){return l(e.target.value)},fullWidth:!0}),Object(O.jsx)(w.CopyToClipboard,{text:c,className:I.margin,children:Object(O.jsx)(y.a,{variant:"outlined",color:"primary",fullWidth:!0,startIcon:Object(O.jsx)(k.a,{fontSize:"large"}),children:"Copy Your Key"})})]}),Object(O.jsxs)(o.a,{item:!0,xs:12,md:6,className:I.padding,children:[Object(O.jsx)(d.a,{gutterBottom:!0,variant:"h6",children:"Create a Video Call"}),Object(O.jsx)(C.a,{label:"Paste your key to make call",value:h,onChange:function(e){return g(e.target.value)},fullWidth:!0,style:{color:"red"}}),r&&!u?Object(O.jsx)(y.a,{variant:"outlined",color:"secondary",startIcon:Object(O.jsx)(N.a,{fontSize:"large"}),fullWidth:!0,onClick:b,className:I.margin,children:"Hang Up"}):Object(O.jsx)(y.a,{variant:"outlined",color:"primary",startIcon:Object(O.jsx)(S.a,{fontSize:"large"}),fullWidth:!0,onClick:function(){return m(h)},className:I.margin,children:"Call"})]})]})}),t]})})},V=function(){var e=Object(n.useContext)(x),t=e.answerCall,a=e.call,c=e.callAccepted;return Object(O.jsx)(O.Fragment,{children:a.isReceivingCall&&!c&&Object(O.jsxs)("div",{style:{display:"flex",justifyContent:"space-around"},children:[Object(O.jsxs)("h1",{children:[a.name," is calling :"]}),Object(O.jsx)(y.a,{variant:"outlined",style:{color:"green"},onClick:t,children:"Answer"})]})})},D=Object(i.a)((function(){return{image:{marginLeft:"15px"},wrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}}})),E=function(){var e=D();return Object(O.jsxs)("div",{className:e.wrapper,children:[Object(O.jsx)("h1",{children:"Video Calling App"}),Object(O.jsx)(g,{}),Object(O.jsx)(I,{children:Object(O.jsx)(V,{})})]})};a(150);r.a.render(Object(O.jsx)(p,{children:Object(O.jsx)(E,{})}),document.getElementById("root"))}},[[151,1,2]]]);
//# sourceMappingURL=main.a5d77085.chunk.js.map